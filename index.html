<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>경기도 유치원 현황</title>
</head>
<body>
    <input type="text" id="myInput" placeholder="Search..." onkeyup="searchTable()">
    <div class="wrap"></div>

    <script>
        let originalData = [];      

        async function loadData(){
            try {
                const response = await fetch('./유치원현황.json');
                // console.log(response);
                if(!response.ok) {
                    throw new Error("데이터를 불러오는데 실패했습니다.")
                }
                originalData = await response.json();
                renderTable(originalData);

            } catch(error){
                console.error('오류발생 : ', error);
            }
        }

        loadData();

        function renderTable(data){
            const wrap = document.querySelector('.wrap');
            wrap.innerHTML = '';

            if(data.length > 0){
                const table = document.createElement('table');

                data.forEach(function(item){
                    const row = document.createElement('tr');

                    ['EDU_SPORT_ADMT_NM', 'KDGT_NM','TELNO','REFINE_ROADNM_ADDR', 'REFINE_ZIPNO'].forEach(function(key){
                        const td = document.createElement('td');
                        td.textContent = item[key]
                        row.appendChild(td);
                    });
                    table.appendChild(row);
                });

                wrap.appendChild(table);
            }
        }

        function searchTable(){
            const input = document.getElementById("myInput").value.toLowerCase();
            const rows = document.querySelectorAll(".wrap tr");

            rows.forEach(function(row) {
                row.style.display = row.textContent.toLowerCase().includes(input) ? "" : "none";
            });
        }

        
    </script>
    
</body>
</html>